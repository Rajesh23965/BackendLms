import { defineNuxtModule, createResolver, addServerImports } from '@nuxt/kit';

const module = defineNuxtModule({
  meta: {
    name: "nuxt-nodemailer",
    configKey: "nodemailer"
  },
  setup(_options, _nuxt) {
    _nuxt.options.runtimeConfig.nodemailer = {
      ..._options,
      ..._nuxt.options.runtimeConfig.nodemailer
    };
    const resolver = createResolver(import.meta.url);
    addServerImports([
      { from: resolver.resolve("./runtime/server/useNodeMailer"), name: "useNodeMailer" }
    ]);
  }
});

export { module as default };
